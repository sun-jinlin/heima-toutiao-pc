(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5849ae56"],{"04ec":function(e,t,a){e.exports=a.p+"img/error.3f7b1f94.gif"},"230c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-article"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("my-bread",[e._v("内容管理")])],1),r("el-form",{attrs:{"label-width":"80px",size:"small"}},[r("el-form-item",{attrs:{label:"状态："}},[r("el-radio-group",{model:{value:e.resParams.status,callback:function(t){e.$set(e.resParams,"status",t)},expression:"resParams.status"}},[r("el-radio",{attrs:{label:null}},[e._v("全部")]),r("el-radio",{attrs:{label:0}},[e._v("草稿")]),r("el-radio",{attrs:{label:1}},[e._v("待审核")]),r("el-radio",{attrs:{label:2}},[e._v("审核通过")]),r("el-radio",{attrs:{label:3}},[e._v("审核失败")]),r("el-radio",{attrs:{label:4}},[e._v("已删除")])],1)],1),r("el-form-item",{attrs:{label:"频道： "}},[r("my-channel",{model:{value:e.resParams.channel_id,callback:function(t){e.$set(e.resParams,"channel_id",t)},expression:"resParams.channel_id"}})],1),r("el-form-item",{attrs:{label:"日期："}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.changeDate},model:{value:e.dateArr,callback:function(t){e.dateArr=t},expression:"dateArr"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.filterArticle}},[e._v("筛选")])],1)],1)],1),r("el-card",{staticStyle:{"margin-top":"20px"}},[r("div",{attrs:{slot:"header"},slot:"header"},[e._v("根据筛选条件共查询到 "+e._s(e.total)+" 条结果：")]),r("el-table",{attrs:{data:e.articles}},[r("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticClass:"cover-image",attrs:{src:e.row.cover.images[0]}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("img",{staticClass:"cover-image",attrs:{src:a("04ec"),alt:""}})])])]}}])}),r("el-table-column",{attrs:{prop:"title",label:"标题",width:"350px"}}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?r("el-tag",{attrs:{type:"info"}},[e._v("草稿")]):e._e(),1===t.row.status?r("el-tag",[e._v("待审核")]):e._e(),2===t.row.status?r("el-tag",{attrs:{type:"success"}},[e._v("审核通过")]):e._e(),3===t.row.status?r("el-tag",{attrs:{type:"warning"}},[e._v("审核失败")]):e._e(),4===t.row.status?r("el-tag",{attrs:{type:"danger"}},[e._v("已删除")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"pubdate",label:"发布时间"}}),r("el-table-column",{attrs:{label:"操作",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",plain:""},on:{click:function(a){return e.toEdit(t.row.id)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",plain:""},on:{click:function(a){return e.delArticle(t.row.id)}}})]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","page-size":e.resParams.per_page,total:e.total,"current-page":e.resParams.page,layout:"prev, pager, next"},on:{"current-change":e.changePage}})],1)],1)},s=[],l=(a("96cf"),a("1da1")),n={name:"article-page",data:function(){return{dateArr:[],resParams:{status:null,channel_id:null,begin_pubdate:null,end_pubdate:null,page:1,per_page:20},articles:[],total:0}},created:function(){this.getArticles()},methods:{delArticle:function(e){var t=this;this.$confirm("此操作将永久删除该文章, 是否继续?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.delete("/articles/".concat(e));case 3:t.$message.success("删除成功"),t.getArticles(),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.$message.error("删除失败");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))).catch((function(){}))},toEdit:function(e){this.$router.push({path:"/publish",query:{id:e}})},changeDate:function(e){e?(this.resParams.begin_pubdate=e[0],this.resParams.end_pubdate=e[1]):(this.resParams.begin_pubdate=null,this.resParams.end_pubdate=null)},filterArticle:function(){this.resParams.page=1,this.getArticles()},getArticles:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/articles",{params:e.resParams});case 2:a=t.sent,r=a.data.data,e.articles=r.results,e.total=r.total_count;case 6:case"end":return t.stop()}}),t)})))()},changePage:function(e){this.resParams.page=e,this.getArticles()}}},c=n,i=(a("d57b"),a("2877")),o=Object(i["a"])(c,r,s,!1,null,"79bccffc",null);t["default"]=o.exports},"70ac":function(e,t,a){},d57b:function(e,t,a){"use strict";var r=a("70ac"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-5849ae56.690ae3e9.js.map